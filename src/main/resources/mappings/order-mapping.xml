<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="OrderDAO">
	<resultMap type="order_code" id="code">
		<id property="no" column="NO" />
		<result property="id" column="ID" />
		<result property="name" column="NAME" />
		<result property="tel" column="TEL" />
		<result property="address" column="ADDRESS" />
		<result property="request" column="REQUEST" />
		<result property="store_no" column="STORE_NO" />
		<result property="order_type" column="ORDER_TYPE" />
		<result property="order_time" column="ORDER_TIME" />
		<result property="delivery_time" column="DELICERY_TIME" />
		<result property="use_point" column="USE_POINT" />
		<result property="use_coupon" column="USE_COUPON" />
		<result property="total_price" column="TOTAL_PRICE" />
		<result property="payment_list" column="PAYMENT_LIST" />
		<result property="payment_status" column="PAYMENT_STATUS" />
		<result property="status" column="STATUS" />
	</resultMap>
	
	<resultMap type="order_list" id="list">
		<id property="no" column="NO" />
		<result property="menu_type" column="MENU_TYPE" />
		<result property="menu_name" column="MENU_NAME" />
		<result property="quantity" column="QUANTITY" />
		<result property="single_price" column="SINGLE_PRICE" />
		<result property="step01" column="STEP01" />
		<result property="add_topping" column="ADD_TOPPING" />
		<result property="add_meat" column="ADD_MEAT" />
		<result property="add_cheese" column="ADD_CHEESE" />
		<result property="step03" column="STEP03" />
		<result property="set_price" column="SET_PRICE" />
	</resultMap>

	<select id="orderCodeList" parameterType="code" resultType="code">
		select * from order_code where ID=#{id} order by ORDER_TIME DESC
	</select>

	<select id="orderList" parameterType="list" resultType="list">
		select * from order_list where NO=#{no}
	</select>
	
	<select id="selectHomeway" parameterType="code" resultType="code">
		select * from order_code where ID=#{id} and ORDER_TYPE='배달'
		order by ORDER_TIME DESC
	</select>
	
	<select id="selectFastway" parameterType="code" resultType="code">
		select * from order_code 
		where ID=#{id} and ORDER_TYPE not in(select ORDER_TYPE from order_code where ORDER_TYPE='배달')
		order by ORDER_TIME DESC
	</select>
	
	<select id="countOrderList" resultType="int">
		select count(*) from order_code where ID=#{id}
	</select>
	
</mapper>